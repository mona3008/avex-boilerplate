(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,r){return d=f()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&c(o,r.prototype),o},d.apply(null,arguments)}function y(e){var t="function"==typeof Map?new Map:void 0;return y=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return d(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},y(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var p=function(e){a(c,e);var n=m(c);function c(){var e;return r(this,c),(e=n.call(this)).resetActiveFilter=e.resetActiveFilter.bind(i(e)),e.debouncedOnSubmit=function(e,t){var r,n=this;return function(){for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];clearTimeout(r),r=setTimeout((function(){return e.apply(n,i)}),t)}}((function(t){e.onSubmitHandler(t)}),500),e.querySelector("form").addEventListener("input",e.debouncedOnSubmit.bind(i(e))),e}return o(c,[{key:"onSubmitHandler",value:function(e){e.preventDefault();var t=new FormData(e.target.closest("form")),r=new URLSearchParams(t).toString();c.renderPage(r,e)}},{key:"resetActiveFilter",value:function(e){e.preventDefault(),c.renderPage(new URL(e.currentTarget.href).searchParams.toString())}}],[{key:"setListeners",value:function(){window.addEventListener("popstate",(function(e){var t=e.state?e.state.searchParams:c.searchParamsInitial;t!==c.searchParamsPrev&&c.renderPage(t,null,!1)}))}},{key:"updateURLHash",value:function(e){history.pushState({searchParams:e},"","".concat(window.location.pathname).concat(e&&"?".concat(e)))}},{key:"renderProductGridContainer",value:function(e){document.getElementById("ProductsList").innerHTML=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductsList").innerHTML}},{key:"renderProductCount",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductsCount").innerHTML;document.getElementById("ProductsCount").innerHTML=t}},{key:"renderFilters",value:function(e,t){(new DOMParser).parseFromString(e,"text/html").querySelectorAll("#FiltersForm .js-filter").forEach((function(e){document.querySelector('.js-filter[data-index="'.concat(e.dataset.index,'"]')).innerHTML=e.innerHTML}))}},{key:"renderSectionFromFetch",value:function(e,r){fetch(e).then((function(e){return e.text()})).then((function(n){var o=n;c.renderProductGridContainer(o),c.data=[].concat(t(c.data),[{html:o,url:e}]),c.renderFilters(o,r),c.renderProductCount(o)}))}},{key:"renderSectionFromCache",value:function(e,t){var r=c.data.find(e).html;c.renderFilters(r,t),c.renderProductGridContainer(r),c.renderProductCount(r)}},{key:"renderPage",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];c.searchParamsPrev=e;var n=document.getElementById("ProductsList").dataset.id;document.getElementById("ProductsList").querySelector("[data-products-list]").classList.add("loading");var o="".concat(window.location.pathname,"?section_id=").concat(n,"&").concat(e),i=function(e){return e.url===o};c.data.some(i)?c.renderSectionFromCache(i,t):c.renderSectionFromFetch(o,t),r&&c.updateURLHash(e)}}]),c}(y(HTMLElement));p.data=[],p.searchParamsInitial=window.location.search.slice(1),p.searchParamsPrev=window.location.search.slice(1),customElements.define("filter-and-sort-form",p),p.setListeners();var v=function(e){a(n,e);var t=m(n);function n(){var e;return r(this,n),(e=t.call(this)).querySelector("a").addEventListener("click",(function(t){t.preventDefault(),(e.closest("filter-and-sort-form")||document.querySelector("filter-and-sort-form")).resetActiveFilter(t)})),e}return o(n)}(y(HTMLElement));function h(){if(window.innerWidth<=768){var e=document.querySelectorAll("[data-mobile-filter-close]");e&&e.length&&e.forEach((function(e){e.addEventListener("click",(function(e){document.querySelector("[data-filters]").classList.remove("open"),document.body.classList.remove("filters-mobile-open")}),!1)}))}}customElements.define("filter-reset",v),document.querySelector("[data-filters-toggler]").addEventListener("click",(function(){var e=document.querySelector("[data-filters]");e&&(window.innerWidth<=768?(e.classList.toggle("open"),document.body.classList.toggle("filters-mobile-open")):e.classList.toggle("close"))}),!1);var b=document.getElementById("SortBy-imitator"),g=document.getElementById("SortBy");function w(){var e=document.getElementById("shopify-section-header");e.classList.contains("sticky-header")&&document.querySelector("[data-filters]")&&(document.querySelector("[data-filters]").style.top=e.offsetHeight+"px")}b.addEventListener("change",(function(e){g.value=e.target.value,g.closest("form").dispatchEvent(new Event("input"))}),!1),window.addEventListener("DOMContentLoaded",(function(){w(),h()})),window.addEventListener("resize",(function(){w(),h()}))})();