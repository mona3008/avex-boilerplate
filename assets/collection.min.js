"use strict";window.theme=window.theme||{};var Filters=function(){var e="screen and (min-width: 750px)",i="#FilterTags",n="#SortBy",t="data-default-sortby";function s(t){t=this.$container=$(t);this.$filterSelect=$(i,t),this.$sortSelect=$(n,t),this.$selects=$(i,t).add($(n,t)),this.defaultSort=this._getDefaultSortValue(),this.$selects.removeClass("hidden"),this.$filterSelect.on("change",this._onFilterChange.bind(this)),this.$sortSelect.on("change",this._onSortChange.bind(this)),this._initBreakpoints(),this._initParams()}return s.prototype=_.assignIn({},s.prototype,{_initBreakpoints:function(){var t=this;enquire.register(e,{match:function(){slate.utils.resizeSelects(t.$selects)}})},_initParams:function(){if(self.queryParams={},location.search.length)for(var t,e=location.search.substr(1).split("&"),i=0;i<e.length;i++)1<(t=e[i].split("=")).length&&(self.queryParams[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))},_onSortChange:function(){self.queryParams.sort_by=this._getSortValue(),self.queryParams.page&&delete self.queryParams.page,window.location.search=decodeURIComponent($.param(self.queryParams))},_onFilterChange:function(){document.location.href=this._getFilterValue()},_getFilterValue:function(){return this.$filterSelect.val()},_getSortValue:function(){return this.$sortSelect.val()||this.defaultSort},_getDefaultSortValue:function(){return this.$sortSelect.attr(t)},onUnload:function(){this.$filterSelect.off("change",this._onFilterChange),this.$sortSelect.off("change",this._onSortChange)}}),s}();$(function(){Filters()});